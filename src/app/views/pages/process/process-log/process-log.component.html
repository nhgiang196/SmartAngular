<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>{{ 'ProcessPlaneFactory.Breadcrumb' | translate }}</h2>
    <ol class="breadcrumb">
      <li>
        <a href="index.html">{{ 'TopNav.ProcessPlaneFactory' | translate }}</a>
      </li>
      <li class="active">
        <strong>{{ 'ProcessPlaneFactory.Breadcrumb' | translate }}</strong>
      </li>
    </ol>
  </div>
</div>


<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>New data for the report</h5> <span class="label label-primary">IN+</span>

        </div>
        <div class="ibox-content">
          <div class="row">
            <form role="form" #myForm="ngForm" name="myForm">
              <div class="col-lg-4">
                <div class="form-group">
                  <label>{{ 'Process.data.StartDate' | translate }}:</label>
                  <input type="text" [(ngModel)]="startDay" bsDatepicker readonly [bsConfig]="bsConfig"
                    class="form-control" placeholder="{{'Item.placeholder.ItemManufactureYear' | translate }}"
                    name="ItemManufactureYear" required>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="form-group">
                  <label> {{ 'Process.data.EndDate' | translate }} *: </label>
                  <input type="text" [(ngModel)]="endDay" bsDatepicker readonly [bsConfig]="bsConfig"
                    class="form-control" placeholder="{{'Item.placeholder.ItemManufactureYear' | translate }}"
                    name="ItemManufactureYear" required>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="form-group">
                  <label> {{ 'Process.data.Factory' | translate }} *: </label>
                  <div class="input-group">
                    <ui-select-box
                  entitykey="Factory"
                  [pageSize]="5"
                  [checkstatus]="true"
                  [(ngModelCustom)]="factoryId"></ui-select-box>
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-primary" (click)="fnFindBomFactoryId()" [disabled]="myForm.invalid"> Go!</button> </span>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" >
    <div class="col-lg-12">
      <div class="tabs-container">
        <ul class="nav nav-tabs">
          <!-- <li *ngFor="let item of bomFactory"><a data-toggle="tab" href="#tab-1"> {{item.BomStage}}</a></li> -->
          <li *ngFor="let stage of bomFactory.BomStage; let i =index" [class.active]="i==0"  (click)="loadProcessLogByStage(stage)">
            <a data-toggle="tab" [href]="'#tab-'+i"> {{stage.StageName}}</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane" *ngFor="let stage of bomFactory.BomStage; let i =index" [class.active]="i==0"  [id]="'tab-'+i" >
            <div class="panel-body">
              <div class="col-lg-12">
                <div class="tabs-container">
                  <div class="tabs-left">
                    <ul class="nav nav-tabs tab-child">
                      <li  *ngFor="let itemOut of stage.BomItemOut; let i =index" [class.active]="i==0"  [id]="'tabItemOut-'+i" (click)="loadProcessLogByItemOut(stage.StageId ,itemOut.ItemId)">
                        <a data-toggle="tab" [href]="'#tabItemOut-'+i"> {{itemOut.ItemName}}</a>
                      </li>
                    </ul>
                    <div class="tab-content ">
                      <div  class="tab-pane" *ngFor="let itemOut of stage.BomItemOut; let i =index" [class.active]="i==0"  [id]="'tabItemOut-'+i">
                        <div class="panel-body panel-body-child">
                          <div class="row">
                            <dx-data-grid
                            #dataGridVar id="myDataGrid"
                            [dataSource]="dataSourceProcessLog"
                            [remoteOperations]="true"  [showBorders]="true" [showRowLines]="true" style="max-height: 500px;">

                            <dxo-selection mode="single"></dxo-selection>
                            <dxo-filter-row [visible]="true"></dxo-filter-row>
                            <dxo-editing
                              mode="popup"
                              [allowUpdating]="true"
                              [allowDeleting]="true"
                              [useIcons] ="true"
                              >
                              <dxo-texts confirmDeleteMessage="Are you sure Delete?"></dxo-texts>

                            </dxo-editing>
                            <dxi-column  dataField="ShiftId"  caption="ShiftId">
                              <dxo-lookup
                                [dataSource]="dataSourceShift"
                                                    displayExpr="ShiftName"
                                                    valueExpr="ShiftId">
                                 </dxo-lookup>
                            </dxi-column>
                            <dxi-column dataField="FactoryId" caption="FactoryName">
                              <dxo-lookup
                                [dataSource]="dataSourceFactory"
                                                    displayExpr="FactoryName"
                                                    valueExpr="FactoryId">
                                 </dxo-lookup>
                            </dxi-column>
                            <dxi-column dataField="StageId" caption="Stage Name">
                              <dxo-lookup
                                [dataSource]="dataSourceStage"
                                                    displayExpr="StageName"
                                                    valueExpr="StageId">
                                 </dxo-lookup>
                            </dxi-column>
                            <dxi-column dataField="ItemOutId" caption="Item Name">
                              <dxo-lookup
                                [dataSource]="dataSourceItem"
                                                    displayExpr="ItemName"
                                                    valueExpr="ItemId">
                                 </dxo-lookup>
                            </dxi-column>
                            <dxi-column  dataField="ProcessLogDate"  caption="ProcessLogDate" dataType="date"></dxi-column>
                            <dxi-column  dataField="ProcessLogDate"  caption="ProcessLogDate" dataType="date"></dxi-column>
                            <dxi-column  dataField="ItemOutIndicator" caption="ItemOutIndicator"></dxi-column>
                            <dxi-column dataField="ItemOutUnitId" caption="ItemOutUnitId">
                              <dxo-lookup
                                [dataSource]="dataSourceUnit"
                                                    displayExpr="UnitName"
                                                    valueExpr="UnitId">
                                 </dxo-lookup>
                            </dxi-column>
                            <dxi-column  dataField="ItemOutQuantity" caption="ItemOutQuantity"></dxi-column>
                            <!-- <dxi-column  dataField="ItemEletricIndicator" caption="ItemEletricIndicator"></dxi-column>
                            <dxi-column  dataField="ItemWaterIndicator" caption="ItemWaterIndicator"></dxi-column> -->
                            <!-- <dxi-column  dataField="CODIn" caption="CODIn"></dxi-column>
                            <dxi-column  dataField="CODOut" caption="CODOut"></dxi-column> -->
                            <!-- <dxi-column  dataField="pHIn" caption="pHIn"></dxi-column>
                            <dxi-column  dataField="pHOut" caption="pHOut"></dxi-column>
                            <dxi-column  dataField="TSSIn" caption="TSSIn"></dxi-column>
                            <dxi-column  dataField="TSSOut" caption="TSSOut"></dxi-column>
                            <dxi-column  dataField="QIn" caption="QIn"></dxi-column>
                            <dxi-column  dataField="QOut" caption="QOut"></dxi-column>
                            <dxi-column  dataField="ColorIn" caption="ColorIn"></dxi-column>
                            <dxi-column  dataField="ColorOut" caption="ColorOut"></dxi-column>
                            <dxi-column  dataField="AmoniIn" caption="AmoniIn"></dxi-column>
                            <dxi-column  dataField="AmoniOut" caption="AmoniOut"></dxi-column>
                            <dxi-column  dataField="TemperatureIn" caption="TemperatureIn"></dxi-column>
                            <dxi-column  dataField="TemperatureOut" caption="TemperatureOut"></dxi-column> -->

                            <!-- <dxi-column  dataField="CreateBy" caption="{{'Item.data.CreateBy' | translate}}"></dxi-column>
                            <dxi-column  dataField="CreateDate" caption="{{'Item.data.CreateDate' | translate}}" dataType="date"></dxi-column>
                            <dxi-column  dataField="ModifyBy" caption="{{'Item.data.ModifyBy' | translate}}"></dxi-column>
                            <dxi-column  dataField="ModifyDate" caption="{{'Item.data.ModifyDate' | translate}}" dataType="date"></dxi-column> -->
                            <dxi-column  dataField="Status" dataType="boolean" caption="{{'Master.data.Status' | translate}}"></dxi-column>

                            <dxo-paging [pageSize]="25"></dxo-paging>
                            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[25, 50, 100]"></dxo-pager>
                        </dx-data-grid>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>

                </div>
              </div>
            </div>
          </div>

        </div>


      </div>
    </div>
  </div>
</div>


